const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BKsOtMie.js","./hg5aJybS.js","./C4cmwJeW.js"])))=>i.map(i=>d[i]);
import{g as jt,p as ba,o as B,B as _a,v as z,k as Sa,r as U,l as xa,m as ve,C as Ia,n as wa,c as F,b as E,a as y,D as ka,E as ze,w as N,T as La,G as Ne,d as G,H as Ca,q as be,I as Da,t as Y,F as ee,s as te,J as Ta,x as bt,K as _t,L as Aa,M as Ea}from"./C4cmwJeW.js";import{_ as Ma}from"./pP1PrXx_.js";import{_ as za}from"./C3Ar38eF.js";import{c as Na,_ as Ra}from"./CCRcQfJ_.js";import{d as Pa,_ as Va,a as Oa,b as Ga,c as Ba}from"./Bnx0PPvk.js";import{e as j,S as _e,c as ue,i as tt,a as Fa,b as Ya,d as Zt,f as Xa,g as Ie,m as $a,p as Ut,h as ke,C as Kt,j as at,k as Ha,l as ce,n as ja,r as St,_ as J,o as qt,q as Wt,s as Jt,u as Ce,t as Za,v as Qt,w as De,x as rt,Z as Ua,y as W,z as ea,A as ta,B as Ue,D as xt,E as ot,G as Te,F as aa,H as Ka,I as qa,J as Ke,K as se,L as Wa,M as Ja,N as It,O as ra,P as Qa,T as Se,Q as Re,R as wt,U as qe,V as er,W as tr,X as ar,Y as H,$ as rr,a0 as or,a1 as nr,a2 as Le,a3 as nt,a4 as q,a5 as he,a6 as ir,a7 as sr,a8 as le,a9 as kt,aa as We,ab as lr,ac as Lt,ad as ur,ae as cr,af as dr,ag as fr,ah as vr,ai as Ct,aj as pr,ak as mr,al as gr,am as hr,an as yr,ao as oa,ap as Dt,aq as br,ar as _r,as as Sr,at as xr,au as Ir,av as wr,aw as kr,ax as Lr,ay as Cr,az as Dr,aA as Tr,aB as Ar}from"./hg5aJybS.js";import{a as Er}from"./VUKfmkwN.js";const Mr=jt({__name:"separator",props:{class:{},orientation:{default:"horizontal"}},setup(r){const t=r;return(e,a)=>(B(),ba(z(Er),_a(e.$attrs,{orientation:t.orientation,class:z(Na)("bg-border",t.orientation==="vertical"?"h-full w-px":"h-px w-full",t.class)}),null,16,["orientation","class"]))}});var zr=(function(){function r(t){this.coordSysDims=[],this.axisMap=ue(),this.categoryAxisMap=ue(),this.coordSysName=t}return r})();function Nr(r){var t=r.get("coordinateSystem"),e=new zr(t),a=Rr[t];if(a)return a(r,e,e.axisMap,e.categoryAxisMap),e}var Rr={cartesian2d:function(r,t,e,a){var o=r.getReferringComponents("xAxis",_e).models[0],n=r.getReferringComponents("yAxis",_e).models[0];t.coordSysDims=["x","y"],e.set("x",o),e.set("y",n),re(o)&&(a.set("x",o),t.firstCategoryDimIndex=0),re(n)&&(a.set("y",n),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(r,t,e,a){var o=r.getReferringComponents("singleAxis",_e).models[0];t.coordSysDims=["single"],e.set("single",o),re(o)&&(a.set("single",o),t.firstCategoryDimIndex=0)},polar:function(r,t,e,a){var o=r.getReferringComponents("polar",_e).models[0],n=o.findAxisModel("radiusAxis"),i=o.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],e.set("radius",n),e.set("angle",i),re(n)&&(a.set("radius",n),t.firstCategoryDimIndex=0),re(i)&&(a.set("angle",i),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(r,t,e,a){t.coordSysDims=["lng","lat"]},parallel:function(r,t,e,a){var o=r.ecModel,n=o.getComponent("parallel",r.get("parallelIndex")),i=t.coordSysDims=n.dimensions.slice();j(n.parallelAxisIndex,function(s,l){var u=o.getComponent("parallelAxis",s),d=i[l];e.set(d,u),re(u)&&(a.set(d,u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function re(r){return r.get("type")==="category"}function Pr(r,t,e){e=e||{};var a=e.byIndex,o=e.stackedCoordDimension,n,i,s;Vr(t)?n=t:(i=t.schema,n=i.dimensions,s=t.store);var l=!!(r&&r.get("stack")),u,d,f,v;if(j(n,function(w,g){tt(w)&&(n[g]=w={name:w}),l&&!w.isExtraCoord&&(!a&&!u&&w.ordinalMeta&&(u=w),!d&&w.type!=="ordinal"&&w.type!=="time"&&(!o||o===w.coordDim)&&(d=w))}),d&&!a&&!u&&(a=!0),d){f="__\0ecstackresult_"+r.id,v="__\0ecstackedover_"+r.id,u&&(u.createInvertedIndices=!0);var p=d.coordDim,m=d.type,b=0;j(n,function(w){w.coordDim===p&&b++});var I={name:f,coordDim:p,coordDimIndex:b,type:m,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:n.length},S={name:v,coordDim:v,coordDimIndex:b+1,type:m,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:n.length+1};i?(s&&(I.storeDimIndex=s.ensureCalculationDimension(v,m),S.storeDimIndex=s.ensureCalculationDimension(f,m)),i.appendCalculationDimension(I),i.appendCalculationDimension(S)):(n.push(I),n.push(S))}return{stackedDimension:d&&d.name,stackedByDimension:u&&u.name,isStackedByIndex:a,stackedOverDimension:v,stackResultDimension:f}}function Vr(r){return!Fa(r.schema)}function Or(r,t){var e=r.get("coordinateSystem"),a=Kt.get(e),o;return t&&t.coordSysDims&&(o=at(t.coordSysDims,function(n){var i={name:n},s=t.axisMap.get(n);if(s){var l=s.get("type");i.type=Ha(l)}return i})),o||(o=a&&(a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice())||["x","y"]),o}function Gr(r,t,e){var a,o;return e&&j(r,function(n,i){var s=n.coordDim,l=e.categoryAxisMap.get(s);l&&(a==null&&(a=i),n.ordinalMeta=l.getOrdinalMeta(),t&&(n.createInvertedIndices=!0)),n.otherDims.itemName!=null&&(o=!0)}),!o&&a!=null&&(r[a].otherDims.itemName=0),a}function Br(r,t,e){e=e||{};var a=t.getSourceManager(),o,n=!1;r?(n=!0,o=Ya(r)):(o=a.getSource(),n=o.sourceFormat===Zt);var i=Nr(t),s=Or(t,i),l=e.useEncodeDefaulter,u=Xa(l)?l:l?Ie($a,s,t):null,d={coordDimensions:s,generateCoord:e.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!n},f=Ut(o,d),v=Gr(f.dimensions,e.createInvertedIndices,i),p=n?null:a.getSharedDataStore(f),m=Pr(t,{schema:f,store:p}),b=new ke(f,t);b.setCalculationInfo(m);var I=v!=null&&Fr(o)?function(S,w,g,k){return k===v?g:this.defaultDimValueGetter(S,w,g,k)}:null;return b.hasItemOption=!1,b.initData(n?o:p,null,I),b}function Fr(r){if(r.sourceFormat===Zt){var t=Yr(r.data||[]);return!ce(ja(t))}}function Yr(r){for(var t=0;t<r.length&&r[t]==null;)t++;return r[t]}function Xr(r,t){var e=r.mapDimensionsAll("defaultedLabel"),a=e.length;if(a===1){var o=St(r,t,e[0]);return o!=null?o+"":null}else if(a){for(var n=[],i=0;i<e.length;i++)n.push(St(r,t,e[i]));return n.join(" ")}}var $r=(function(r){J(t,r);function t(e,a,o,n){var i=r.call(this)||this;return i.updateData(e,a,o,n),i}return t.prototype._createSymbol=function(e,a,o,n,i){this.removeAll();var s=qt(e,-1,-1,2,2,null,i);s.attr({z2:100,culling:!0,scaleX:n[0]/2,scaleY:n[1]/2}),s.drift=Hr,this._symbolType=e,this.add(s)},t.prototype.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(null,e)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){Wt(this.childAt(0))},t.prototype.downplay=function(){Jt(this.childAt(0))},t.prototype.setZ=function(e,a){var o=this.childAt(0);o.zlevel=e,o.z=a},t.prototype.setDraggable=function(e,a){var o=this.childAt(0);o.draggable=e,o.cursor=!a&&e?"move":o.cursor},t.prototype.updateData=function(e,a,o,n){this.silent=!1;var i=e.getItemVisual(a,"symbol")||"circle",s=e.hostModel,l=t.getSymbolSize(e,a),u=i!==this._symbolType,d=n&&n.disableAnimation;if(u){var f=e.getItemVisual(a,"symbolKeepAspect");this._createSymbol(i,e,a,l,f)}else{var v=this.childAt(0);v.silent=!1;var p={scaleX:l[0]/2,scaleY:l[1]/2};d?v.attr(p):Ce(v,p,s,a),Za(v)}if(this._updateCommon(e,a,l,o,n),u){var v=this.childAt(0);if(!d){var p={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:v.style.opacity}};v.scaleX=v.scaleY=0,v.style.opacity=0,Qt(v,p,s,a)}}d&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(e,a,o,n,i){var s=this.childAt(0),l=e.hostModel,u,d,f,v,p,m,b,I,S;if(n&&(u=n.emphasisItemStyle,d=n.blurItemStyle,f=n.selectItemStyle,v=n.focus,p=n.blurScope,b=n.labelStatesModels,I=n.hoverScale,S=n.cursorStyle,m=n.emphasisDisabled),!n||e.hasItemOption){var w=n&&n.itemModel?n.itemModel:e.getItemModel(a),g=w.getModel("emphasis");u=g.getModel("itemStyle").getItemStyle(),f=w.getModel(["select","itemStyle"]).getItemStyle(),d=w.getModel(["blur","itemStyle"]).getItemStyle(),v=g.get("focus"),p=g.get("blurScope"),m=g.get("disabled"),b=De(w),I=g.getShallow("scale"),S=w.getShallow("cursor")}var k=e.getItemVisual(a,"symbolRotate");s.attr("rotation",(k||0)*Math.PI/180||0);var _=rt(e.getItemVisual(a,"symbolOffset"),o);_&&(s.x=_[0],s.y=_[1]),S&&s.attr("cursor",S);var x=e.getItemVisual(a,"style"),T=x.fill;if(s instanceof Ua){var A=s.style;s.useStyle(W({image:A.image,x:A.x,y:A.y,width:A.width,height:A.height},x))}else s.__isEmptyBrush?s.useStyle(W({},x)):s.useStyle(x),s.style.decal=null,s.setColor(T,i&&i.symbolInnerColor),s.style.strokeNoScale=!0;var C=e.getItemVisual(a,"liftZ"),V=this._z2;C!=null?V==null&&(this._z2=s.z2,s.z2+=C):V!=null&&(s.z2=V,this._z2=null);var O=i&&i.useNameLabel;ea(s,b,{labelFetcher:l,labelDataIndex:a,defaultText:R,inheritColor:T,defaultOpacity:x.opacity});function R(ye){return O?e.getName(ye):Xr(e,ye)}this._sizeX=o[0]/2,this._sizeY=o[1]/2;var $=s.ensureState("emphasis");$.style=u,s.ensureState("select").style=f,s.ensureState("blur").style=d;var de=I==null||I===!0?Math.max(1.1,3/this._sizeY):isFinite(I)&&I>0?+I:1;$.scaleX=this._sizeX*de,$.scaleY=this._sizeY*de,this.setSymbolScale(1),ta(this,v,p,m)},t.prototype.setSymbolScale=function(e){this.scaleX=this.scaleY=e},t.prototype.fadeOut=function(e,a,o){var n=this.childAt(0),i=Ue(this).dataIndex,s=o&&o.animation;if(this.silent=n.silent=!0,o&&o.fadeLabel){var l=n.getTextContent();l&&xt(l,{style:{opacity:0}},a,{dataIndex:i,removeOpt:s,cb:function(){n.removeTextContent()}})}else n.removeTextContent();xt(n,{style:{opacity:0},scaleX:0,scaleY:0},a,{dataIndex:i,cb:e,removeOpt:s})},t.getSymbolSize=function(e,a){return ot(e.getItemVisual(a,"symbolSize"))},t})(Te);function Hr(r,t){this.parent.drift(r,t)}function Pe(r,t,e,a){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(a.isIgnore&&a.isIgnore(e))&&!(a.clipShape&&!a.clipShape.contain(t[0],t[1]))&&r.getItemVisual(e,"symbol")!=="none"}function Tt(r){return r!=null&&!Ka(r)&&(r={isIgnore:r}),r||{}}function At(r){var t=r.hostModel,e=t.getModel("emphasis");return{emphasisItemStyle:e.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:e.get("focus"),blurScope:e.get("blurScope"),emphasisDisabled:e.get("disabled"),hoverScale:e.get("scale"),labelStatesModels:De(t),cursorStyle:t.get("cursor")}}var jr=(function(){function r(t){this.group=new Te,this._SymbolCtor=t||$r}return r.prototype.updateData=function(t,e){this._progressiveEls=null,e=Tt(e);var a=this.group,o=t.hostModel,n=this._data,i=this._SymbolCtor,s=e.disableAnimation,l=At(t),u={disableAnimation:s},d=e.getSymbolPoint||function(f){return t.getItemLayout(f)};n||a.removeAll(),t.diff(n).add(function(f){var v=d(f);if(Pe(t,v,f,e)){var p=new i(t,f,l,u);p.setPosition(v),t.setItemGraphicEl(f,p),a.add(p)}}).update(function(f,v){var p=n.getItemGraphicEl(v),m=d(f);if(!Pe(t,m,f,e)){a.remove(p);return}var b=t.getItemVisual(f,"symbol")||"circle",I=p&&p.getSymbolType&&p.getSymbolType();if(!p||I&&I!==b)a.remove(p),p=new i(t,f,l,u),p.setPosition(m);else{p.updateData(t,f,l,u);var S={x:m[0],y:m[1]};s?p.attr(S):Ce(p,S,o)}a.add(p),t.setItemGraphicEl(f,p)}).remove(function(f){var v=n.getItemGraphicEl(f);v&&v.fadeOut(function(){a.remove(v)},o)}).execute(),this._getSymbolPoint=d,this._data=t},r.prototype.updateLayout=function(){var t=this,e=this._data;e&&e.eachItemGraphicEl(function(a,o){var n=t._getSymbolPoint(o);a.setPosition(n),a.markRedraw()})},r.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=At(t),this._data=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(t,e,a){this._progressiveEls=[],a=Tt(a);function o(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var n=t.start;n<t.end;n++){var i=e.getItemLayout(n);if(Pe(e,i,n,a)){var s=new this._SymbolCtor(e,n,this._seriesScope);s.traverse(o),s.setPosition(i),this.group.add(s),e.setItemGraphicEl(n,s),this._progressiveEls.push(s)}}},r.prototype.eachRendered=function(t){aa(this._progressiveEls||this.group,t)},r.prototype.remove=function(t){var e=this.group,a=this._data;a&&t?a.eachItemGraphicEl(function(o){o.fadeOut(function(){e.remove(o)},a.hostModel)}):e.removeAll()},r})(),Et="\0_ec_interaction_mutex";function Mt(r,t){return!!Zr(r)[t]}function Zr(r){return r[Et]||(r[Et]={})}qa({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Ke);var Ur=(function(r){J(t,r);function t(e){var a=r.call(this)||this;a._zr=e;var o=se(a._mousedownHandler,a),n=se(a._mousemoveHandler,a),i=se(a._mouseupHandler,a),s=se(a._mousewheelHandler,a),l=se(a._pinchHandler,a);return a.enable=function(u,d){this.disable(),this._opt=Wa(Ja(d)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(e.on("mousedown",o),e.on("mousemove",n),e.on("mouseup",i)),(u===!0||u==="scale"||u==="zoom")&&(e.on("mousewheel",s),e.on("pinch",l))},a.disable=function(){e.off("mousedown",o),e.off("mousemove",n),e.off("mouseup",i),e.off("mousewheel",s),e.off("pinch",l)},a}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(e){this.pointerChecker=e},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(e){if(!It(e)){for(var a=e.target;a;){if(a.draggable)return;a=a.__hostTarget||a.parent}var o=e.offsetX,n=e.offsetY;this.pointerChecker&&this.pointerChecker(e,o,n)&&(this._x=o,this._y=n,this._dragging=!0)}},t.prototype._mousemoveHandler=function(e){if(!(!this._dragging||!we("moveOnMouseMove",e,this._opt)||e.gestureEvent==="pinch"||Mt(this._zr,"globalPan"))){var a=e.offsetX,o=e.offsetY,n=this._x,i=this._y,s=a-n,l=o-i;this._x=a,this._y=o,this._opt.preventDefaultMouseMove&&ra(e.event),na(this,"pan","moveOnMouseMove",e,{dx:s,dy:l,oldX:n,oldY:i,newX:a,newY:o,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(e){It(e)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(e){var a=we("zoomOnMouseWheel",e,this._opt),o=we("moveOnMouseWheel",e,this._opt),n=e.wheelDelta,i=Math.abs(n),s=e.offsetX,l=e.offsetY;if(!(n===0||!a&&!o)){if(a){var u=i>3?1.4:i>1?1.2:1.1,d=n>0?u:1/u;Ve(this,"zoom","zoomOnMouseWheel",e,{scale:d,originX:s,originY:l,isAvailableBehavior:null})}if(o){var f=Math.abs(n),v=(n>0?1:-1)*(f>3?.4:f>1?.15:.05);Ve(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:v,originX:s,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(e){if(!Mt(this._zr,"globalPan")){var a=e.pinchScale>1?1.1:1/1.1;Ve(this,"zoom",null,e,{scale:a,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})}},t})(Qa);function Ve(r,t,e,a,o){r.pointerChecker&&r.pointerChecker(a,o.originX,o.originY)&&(ra(a.event),na(r,t,e,a,o))}function na(r,t,e,a,o){o.isAvailableBehavior=se(we,null,e,a),r.trigger(t,o)}function we(r,t,e){var a=e[r];return!r||a&&(!tt(a)||t.event[a+"Key"])}function Kr(r,t,e){var a=r.target;a.x+=t,a.y+=e,a.dirty()}function qr(r,t,e,a){var o=r.target,n=r.zoomLimit,i=r.zoom=r.zoom||1;if(i*=t,n){var s=n.min||0,l=n.max||1/0;i=Math.max(Math.min(l,i),s)}var u=i/r.zoom;r.zoom=i,o.x-=(e-o.x)*(u-1),o.y-=(a-o.y)*(u-1),o.scaleX*=u,o.scaleY*=u,o.dirty()}var Wr={axisPointer:1,tooltip:1,brush:1};function Jr(r,t,e){var a=t.getComponentByElement(r.topTarget),o=a&&a.coordinateSystem;return a&&a!==e&&!Wr.hasOwnProperty(a.mainType)&&o&&o.model!==e}var zt=qe,ia=(function(r){J(t,r);function t(e){var a=r.call(this)||this;return a.type="view",a.dimensions=["x","y"],a._roamTransformable=new Se,a._rawTransformable=new Se,a.name=e,a}return t.prototype.setBoundingRect=function(e,a,o,n){return this._rect=new Re(e,a,o,n),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(e,a,o,n){this._transformTo(e,a,o,n),this._viewRect=new Re(e,a,o,n)},t.prototype._transformTo=function(e,a,o,n){var i=this.getBoundingRect(),s=this._rawTransformable;s.transform=i.calculateTransform(new Re(e,a,o,n));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},t.prototype.setCenter=function(e,a){e&&(this._center=[wt(e[0],a.getWidth()),wt(e[1],a.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(e){e=e||1;var a=this.zoomLimit;a&&(a.max!=null&&(e=Math.min(a.max,e)),a.min!=null&&(e=Math.max(a.min,e))),this._zoom=e,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var e=this.getBoundingRect(),a=e.x+e.width/2,o=e.y+e.height/2;return[a,o]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),a=this._roamTransformable,o=this.getDefaultCenter(),n=this.getCenter(),i=this.getZoom();n=qe([],n,e),o=qe([],o,e),a.originX=n[0],a.originY=n[1],a.x=o[0]-n[0],a.y=o[1]-n[1],a.scaleX=a.scaleY=i,this._updateTransform()},t.prototype._updateTransform=function(){var e=this._roamTransformable,a=this._rawTransformable;a.parent=e,e.updateTransform(),a.updateTransform(),er(this.transform||(this.transform=[]),a.transform||tr()),this._rawTransform=a.getLocalTransform(),this.invTransform=this.invTransform||[],ar(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var e=this._rawTransformable,a=this._roamTransformable,o=new Se;return o.transform=a.transform,o.decomposeTransform(),{roam:{x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},t.prototype.dataToPoint=function(e,a,o){var n=a?this._rawTransform:this.transform;return o=o||[],n?zt(o,e,n):H(o,e)},t.prototype.pointToData=function(e){var a=this.invTransform;return a?zt([],e,a):[e[0],e[1]]},t.prototype.convertToPixel=function(e,a,o){var n=Nt(a);return n===this?n.dataToPoint(o):null},t.prototype.convertFromPixel=function(e,a,o){var n=Nt(a);return n===this?n.pointToData(o):null},t.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},t.dimensions=["x","y"],t})(Se);function Nt(r){var t=r.seriesModel;return t?t.coordinateSystem:null}function Rt(r,t){return r.pointToProjected?r.pointToProjected(t):r.pointToData(t)}function Qr(r,t,e,a){var o=r.getZoom(),n=r.getCenter(),i=t.zoom,s=r.projectedToPoint?r.projectedToPoint(n):r.dataToPoint(n);if(t.dx!=null&&t.dy!=null&&(s[0]-=t.dx,s[1]-=t.dy,r.setCenter(Rt(r,s),a)),i!=null){r.scaleX*=i,r.scaleY*=i;var l=(t.originX-r.x)*(i-1),u=(t.originY-r.y)*(i-1);r.x-=l,r.y-=u,r.updateTransform(),r.setCenter(Rt(r,s),a),r.setZoom(i*o)}return{center:r.getCenter(),zoom:r.getZoom()}}var Z=or();function eo(r){var t=r.mainData,e=r.datas;e||(e={main:t},r.datasAttr={main:"data"}),r.datas=r.mainData=null,sa(t,e,r),j(e,function(a){j(t.TRANSFERABLE_METHODS,function(o){a.wrapMethod(o,Ie(to,r))})}),t.wrapMethod("cloneShallow",Ie(ro,r)),j(t.CHANGABLE_METHODS,function(a){t.wrapMethod(a,Ie(ao,r))}),rr(e[t.dataType]===t)}function to(r,t){if(io(this)){var e=W({},Z(this).datas);e[this.dataType]=t,sa(t,e,r)}else it(t,this.dataType,Z(this).mainData,r);return t}function ao(r,t){return r.struct&&r.struct.update(),t}function ro(r,t){return j(Z(t).datas,function(e,a){e!==t&&it(e.cloneShallow(),a,t,r)}),t}function oo(r){var t=Z(this).mainData;return r==null||t==null?t:Z(t).datas[r]}function no(){var r=Z(this).mainData;return r==null?[{data:r}]:at(nr(Z(r).datas),function(t){return{type:t,data:Z(r).datas[t]}})}function io(r){return Z(r).mainData===r}function sa(r,t,e){Z(r).datas={},j(t,function(a,o){it(a,o,r,e)})}function it(r,t,e,a){Z(e).datas[t]=r,Z(r).mainData=e,r.dataType=t,a.struct&&(r[a.structAttr]=a.struct,a.struct[a.datasAttr[t]]=r),r.getLinkedData=oo,r.getLinkedDataAll=no}function so(r){var t=r.findComponents({mainType:"legend"});!t||!t.length||r.eachSeriesByType("graph",function(e){var a=e.getCategoriesData(),o=e.getGraph(),n=o.data,i=a.mapArray(a.getName);n.filterSelf(function(s){var l=n.getItemModel(s),u=l.getShallow("category");if(u!=null){Le(u)&&(u=i[u]);for(var d=0;d<t.length;d++)if(!t[d].isSelected(u))return!1}return!0})})}function lo(r){var t={};r.eachSeriesByType("graph",function(e){var a=e.getCategoriesData(),o=e.getData(),n={};a.each(function(i){var s=a.getName(i);n["ec-"+s]=i;var l=a.getItemModel(i),u=l.getModel("itemStyle").getItemStyle();u.fill||(u.fill=e.getColorFromPalette(s,t)),a.setItemVisual(i,"style",u);for(var d=["symbol","symbolSize","symbolKeepAspect"],f=0;f<d.length;f++){var v=l.getShallow(d[f],!0);v!=null&&a.setItemVisual(i,d[f],v)}}),a.count()&&o.each(function(i){var s=o.getItemModel(i),l=s.getShallow("category");if(l!=null){tt(l)&&(l=n["ec-"+l]);var u=a.getItemVisual(l,"style"),d=o.ensureUniqueItemVisual(i,"style");W(d,u);for(var f=["symbol","symbolSize","symbolKeepAspect"],v=0;v<f.length;v++)o.setItemVisual(i,f[v],a.getItemVisual(l,f[v]))}})})}function xe(r){return r instanceof Array||(r=[r,r]),r}function uo(r){r.eachSeriesByType("graph",function(t){var e=t.getGraph(),a=t.getEdgeData(),o=xe(t.get("edgeSymbol")),n=xe(t.get("edgeSymbolSize"));a.setVisual("fromSymbol",o&&o[0]),a.setVisual("toSymbol",o&&o[1]),a.setVisual("fromSymbolSize",n&&n[0]),a.setVisual("toSymbolSize",n&&n[1]),a.setVisual("style",t.getModel("lineStyle").getLineStyle()),a.each(function(i){var s=a.getItemModel(i),l=e.getEdgeByIndex(i),u=xe(s.getShallow("symbol",!0)),d=xe(s.getShallow("symbolSize",!0)),f=s.getModel("lineStyle").getLineStyle(),v=a.ensureUniqueItemVisual(i,"style");switch(W(v,f),v.stroke){case"source":{var p=l.node1.getVisual("style");v.stroke=p&&p.fill;break}case"target":{var p=l.node2.getVisual("style");v.stroke=p&&p.fill;break}}u[0]&&l.setVisual("fromSymbol",u[0]),u[1]&&l.setVisual("toSymbol",u[1]),d[0]&&l.setVisual("fromSymbolSize",d[0]),d[1]&&l.setVisual("toSymbolSize",d[1])})})}var Je="-->",Ae=function(r){return r.get("autoCurveness")||null},la=function(r,t){var e=Ae(r),a=20,o=[];if(Le(e))a=e;else if(ce(e)){r.__curvenessList=e;return}t>a&&(a=t);var n=a%2?a+2:a+3;o=[];for(var i=0;i<n;i++)o.push((i%2?i+1:i)/10*(i%2?-1:1));r.__curvenessList=o},ge=function(r,t,e){var a=[r.id,r.dataIndex].join("."),o=[t.id,t.dataIndex].join(".");return[e.uid,a,o].join(Je)},ua=function(r){var t=r.split(Je);return[t[0],t[2],t[1]].join(Je)},co=function(r,t){var e=ge(r.node1,r.node2,t);return t.__edgeMap[e]},fo=function(r,t){var e=Qe(ge(r.node1,r.node2,t),t),a=Qe(ge(r.node2,r.node1,t),t);return e+a},Qe=function(r,t){var e=t.__edgeMap;return e[r]?e[r].length:0};function vo(r){Ae(r)&&(r.__curvenessList=[],r.__edgeMap={},la(r))}function po(r,t,e,a){if(Ae(e)){var o=ge(r,t,e),n=e.__edgeMap,i=n[ua(o)];n[o]&&!i?n[o].isForward=!0:i&&n[o]&&(i.isForward=!0,n[o].isForward=!1),n[o]=n[o]||[],n[o].push(a)}}function st(r,t,e,a){var o=Ae(t),n=ce(o);if(!o)return null;var i=co(r,t);if(!i)return null;for(var s=-1,l=0;l<i.length;l++)if(i[l]===e){s=l;break}var u=fo(r,t);la(t,u),r.lineStyle=r.lineStyle||{};var d=ge(r.node1,r.node2,t),f=t.__curvenessList,v=n||u%2?0:1;if(i.isForward)return f[v+s];var p=ua(d),m=Qe(p,t),b=f[s+m+v];return a?n?o&&o[0]===0?(m+v)%2?b:-b:((m%2?0:1)+v)%2?b:-b:(m+v)%2?b:-b:f[s+m+v]}function ca(r){var t=r.coordinateSystem;if(!(t&&t.type!=="view")){var e=r.getGraph();e.eachNode(function(a){var o=a.getModel();a.setLayout([+o.get("x"),+o.get("y")])}),lt(e,r)}}function lt(r,t){r.eachEdge(function(e,a){var o=nt(e.getModel().get(["lineStyle","curveness"]),-st(e,t,a,!0),0),n=q(e.node1.getLayout()),i=q(e.node2.getLayout()),s=[n,i];+o&&s.push([(n[0]+i[0])/2-(n[1]-i[1])*o,(n[1]+i[1])/2-(i[0]-n[0])*o]),e.setLayout(s)})}function mo(r,t){r.eachSeriesByType("graph",function(e){var a=e.get("layout"),o=e.coordinateSystem;if(o&&o.type!=="view"){var n=e.getData(),i=[];j(o.dimensions,function(v){i=i.concat(n.mapDimensionsAll(v))});for(var s=0;s<n.count();s++){for(var l=[],u=!1,d=0;d<i.length;d++){var f=n.get(i[d],s);isNaN(f)||(u=!0),l.push(f)}u?n.setItemLayout(s,o.dataToPoint(l)):n.setItemLayout(s,[NaN,NaN])}lt(n.graph,e)}else(!a||a==="none")&&ca(e)})}function pe(r){var t=r.coordinateSystem;if(t.type!=="view")return 1;var e=r.option.nodeScaleRatio,a=t.scaleX,o=t.getZoom(),n=(o-1)*e+1;return n/a}function me(r){var t=r.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var Pt=Math.PI,Oe=[];function ut(r,t,e,a){var o=r.coordinateSystem;if(!(o&&o.type!=="view")){var n=o.getBoundingRect(),i=r.getData(),s=i.graph,l=n.width/2+n.x,u=n.height/2+n.y,d=Math.min(n.width,n.height)/2,f=i.count();if(i.setLayout({cx:l,cy:u}),!!f){if(e){var v=o.pointToData(a),p=v[0],m=v[1],b=[p-l,m-u];he(b,b),ir(b,b,d),e.setLayout([l+b[0],u+b[1]],!0);var I=r.get(["circular","rotateLabel"]);da(e,I,l,u)}go[t](r,s,i,d,l,u,f),s.eachEdge(function(S,w){var g=nt(S.getModel().get(["lineStyle","curveness"]),st(S,r,w),0),k=q(S.node1.getLayout()),_=q(S.node2.getLayout()),x,T=(k[0]+_[0])/2,A=(k[1]+_[1])/2;+g&&(g*=3,x=[l*g+T*(1-g),u*g+A*(1-g)]),S.setLayout([k,_,x])})}}}var go={value:function(r,t,e,a,o,n,i){var s=0,l=e.getSum("value"),u=Math.PI*2/(l||i);t.eachNode(function(d){var f=d.getValue("value"),v=u*(l?f:1)/2;s+=v,d.setLayout([a*Math.cos(s)+o,a*Math.sin(s)+n]),s+=v})},symbolSize:function(r,t,e,a,o,n,i){var s=0;Oe.length=i;var l=pe(r);t.eachNode(function(f){var v=me(f);isNaN(v)&&(v=2),v<0&&(v=0),v*=l;var p=Math.asin(v/2/a);isNaN(p)&&(p=Pt/2),Oe[f.dataIndex]=p,s+=p*2});var u=(2*Pt-s)/i/2,d=0;t.eachNode(function(f){var v=u+Oe[f.dataIndex];d+=v,(!f.getLayout()||!f.getLayout().fixed)&&f.setLayout([a*Math.cos(d)+o,a*Math.sin(d)+n]),d+=v})}};function da(r,t,e,a){var o=r.getGraphicEl();if(o){var n=r.getModel(),i=n.get(["label","rotate"])||0,s=o.getSymbolPath();if(t){var l=r.getLayout(),u=Math.atan2(l[1]-a,l[0]-e);u<0&&(u=Math.PI*2+u);var d=l[0]<e;d&&(u=u-Math.PI);var f=d?"left":"right";s.setTextConfig({rotation:-u,position:f,origin:"center"});var v=s.ensureState("emphasis");W(v.textConfig||(v.textConfig={}),{position:f})}else s.setTextConfig({rotation:i*=Math.PI/180})}}function ho(r){r.eachSeriesByType("graph",function(t){t.get("layout")==="circular"&&ut(t,"symbolSize")})}var oe=We;function yo(r,t,e){for(var a=r,o=t,n=e.rect,i=n.width,s=n.height,l=[n.x+i/2,n.y+s/2],u=e.gravity==null?.1:e.gravity,d=0;d<a.length;d++){var f=a[d];f.p||(f.p=sr(i*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),f.pp=q(f.p),f.edges=null}var v=e.friction==null?.6:e.friction,p=v,m,b;return{warmUp:function(){p=v*.8},setFixed:function(I){a[I].fixed=!0},setUnfixed:function(I){a[I].fixed=!1},beforeStep:function(I){m=I},afterStep:function(I){b=I},step:function(I){m&&m(a,o);for(var S=[],w=a.length,g=0;g<o.length;g++){var k=o[g];if(!k.ignoreForceLayout){var _=k.n1,x=k.n2;le(S,x.p,_.p);var T=kt(S)-k.d,A=x.w/(_.w+x.w);isNaN(A)&&(A=0),he(S,S),!_.fixed&&oe(_.p,_.p,S,A*T*p),!x.fixed&&oe(x.p,x.p,S,-(1-A)*T*p)}}for(var g=0;g<w;g++){var C=a[g];C.fixed||(le(S,l,C.p),oe(C.p,C.p,S,u*p))}for(var g=0;g<w;g++)for(var _=a[g],V=g+1;V<w;V++){var x=a[V];le(S,x.p,_.p);var T=kt(S);T===0&&(lr(S,Math.random()-.5,Math.random()-.5),T=1);var O=(_.rep+x.rep)/T/T;!_.fixed&&oe(_.pp,_.pp,S,O),!x.fixed&&oe(x.pp,x.pp,S,-O)}for(var R=[],g=0;g<w;g++){var C=a[g];C.fixed||(le(R,C.p,C.pp),oe(C.p,C.p,R,p),H(C.pp,C.p))}p=p*.992;var $=p<.01;b&&b(a,o,$),I&&I($)}}}function bo(r){r.eachSeriesByType("graph",function(t){var e=t.coordinateSystem;if(!(e&&e.type!=="view"))if(t.get("layout")==="force"){var a=t.preservedPoints||{},o=t.getGraph(),n=o.data,i=o.edgeData,s=t.getModel("force"),l=s.get("initLayout");t.preservedPoints?n.each(function(g){var k=n.getId(g);n.setItemLayout(g,a[k]||[NaN,NaN])}):!l||l==="none"?ca(t):l==="circular"&&ut(t,"value");var u=n.getDataExtent("value"),d=i.getDataExtent("value"),f=s.get("repulsion"),v=s.get("edgeLength"),p=ce(f)?f:[f,f],m=ce(v)?v:[v,v];m=[m[1],m[0]];var b=n.mapArray("value",function(g,k){var _=n.getItemLayout(k),x=Lt(g,u,p);return isNaN(x)&&(x=(p[0]+p[1])/2),{w:x,rep:x,fixed:n.getItemModel(k).get("fixed"),p:!_||isNaN(_[0])||isNaN(_[1])?null:_}}),I=i.mapArray("value",function(g,k){var _=o.getEdgeByIndex(k),x=Lt(g,d,m);isNaN(x)&&(x=(m[0]+m[1])/2);var T=_.getModel(),A=nt(_.getModel().get(["lineStyle","curveness"]),-st(_,t,k,!0),0);return{n1:b[_.node1.dataIndex],n2:b[_.node2.dataIndex],d:x,curveness:A,ignoreForceLayout:T.get("ignoreForceLayout")}}),S=e.getBoundingRect(),w=yo(b,I,{rect:S,gravity:s.get("gravity"),friction:s.get("friction")});w.beforeStep(function(g,k){for(var _=0,x=g.length;_<x;_++)g[_].fixed&&H(g[_].p,o.getNodeByIndex(_).getLayout())}),w.afterStep(function(g,k,_){for(var x=0,T=g.length;x<T;x++)g[x].fixed||o.getNodeByIndex(x).setLayout(g[x].p),a[n.getId(x)]=g[x].p;for(var x=0,T=k.length;x<T;x++){var A=k[x],C=o.getEdgeByIndex(x),V=A.n1.p,O=A.n2.p,R=C.getLayout();R=R?R.slice():[],R[0]=R[0]||[],R[1]=R[1]||[],H(R[0],V),H(R[1],O),+A.curveness&&(R[2]=[(V[0]+O[0])/2-(V[1]-O[1])*A.curveness,(V[1]+O[1])/2-(O[0]-V[0])*A.curveness]),C.setLayout(R)}}),t.forceLayout=w,t.preservedPoints=a,w.step()}else t.forceLayout=null})}function _o(r,t,e){var a=W(r.getBoxLayoutParams(),{aspect:e});return cr(a,{width:t.getWidth(),height:t.getHeight()})}function So(r,t){var e=[];return r.eachSeriesByType("graph",function(a){var o=a.get("coordinateSystem");if(!o||o==="view"){var n=a.getData(),i=n.mapArray(function(I){var S=n.getItemModel(I);return[+S.get("x"),+S.get("y")]}),s=[],l=[];ur(i,s,l),l[0]-s[0]===0&&(l[0]+=1,s[0]-=1),l[1]-s[1]===0&&(l[1]+=1,s[1]-=1);var u=(l[0]-s[0])/(l[1]-s[1]),d=_o(a,t,u);isNaN(u)&&(s=[d.x,d.y],l=[d.x+d.width,d.y+d.height]);var f=l[0]-s[0],v=l[1]-s[1],p=d.width,m=d.height,b=a.coordinateSystem=new ia;b.zoomLimit=a.get("scaleLimit"),b.setBoundingRect(s[0],s[1],f,v),b.setViewRect(d.x,d.y,p,m),b.setCenter(a.get("center"),t),b.setZoom(a.get("zoom")),e.push(b)}}),e}var Vt=dr.prototype,Ge=fr.prototype,fa=(function(){function r(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return r})();(function(r){J(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t})(fa);function Be(r){return isNaN(+r.cpx1)||isNaN(+r.cpy1)}var xo=(function(r){J(t,r);function t(e){var a=r.call(this,e)||this;return a.type="ec-line",a}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new fa},t.prototype.buildPath=function(e,a){Be(a)?Vt.buildPath.call(this,e,a):Ge.buildPath.call(this,e,a)},t.prototype.pointAt=function(e){return Be(this.shape)?Vt.pointAt.call(this,e):Ge.pointAt.call(this,e)},t.prototype.tangentAt=function(e){var a=this.shape,o=Be(a)?[a.x2-a.x1,a.y2-a.y1]:Ge.tangentAt.call(this,e);return he(o,o)},t})(vr),Fe=["fromSymbol","toSymbol"];function Ot(r){return"_"+r+"Type"}function Gt(r,t,e){var a=t.getItemVisual(e,r);if(!a||a==="none")return a;var o=t.getItemVisual(e,r+"Size"),n=t.getItemVisual(e,r+"Rotate"),i=t.getItemVisual(e,r+"Offset"),s=t.getItemVisual(e,r+"KeepAspect"),l=ot(o),u=rt(i||0,l);return a+l+u+(n||"")+(s||"")}function Bt(r,t,e){var a=t.getItemVisual(e,r);if(!(!a||a==="none")){var o=t.getItemVisual(e,r+"Size"),n=t.getItemVisual(e,r+"Rotate"),i=t.getItemVisual(e,r+"Offset"),s=t.getItemVisual(e,r+"KeepAspect"),l=ot(o),u=rt(i||0,l),d=qt(a,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return d.__specifiedRotation=n==null||isNaN(n)?void 0:+n*Math.PI/180||0,d.name=r,d}}function Io(r){var t=new xo({name:"line",subPixelOptimize:!0});return et(t.shape,r),t}function et(r,t){r.x1=t[0][0],r.y1=t[0][1],r.x2=t[1][0],r.y2=t[1][1],r.percent=1;var e=t[2];e?(r.cpx1=e[0],r.cpy1=e[1]):(r.cpx1=NaN,r.cpy1=NaN)}var wo=(function(r){J(t,r);function t(e,a,o){var n=r.call(this)||this;return n._createLine(e,a,o),n}return t.prototype._createLine=function(e,a,o){var n=e.hostModel,i=e.getItemLayout(a),s=Io(i);s.shape.percent=0,Qt(s,{shape:{percent:1}},n,a),this.add(s),j(Fe,function(l){var u=Bt(l,e,a);this.add(u),this[Ot(l)]=Gt(l,e,a)},this),this._updateCommonStl(e,a,o)},t.prototype.updateData=function(e,a,o){var n=e.hostModel,i=this.childOfName("line"),s=e.getItemLayout(a),l={shape:{}};et(l.shape,s),Ce(i,l,n,a),j(Fe,function(u){var d=Gt(u,e,a),f=Ot(u);if(this[f]!==d){this.remove(this.childOfName(u));var v=Bt(u,e,a);this.add(v)}this[f]=d},this),this._updateCommonStl(e,a,o)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(e,a,o){var n=e.hostModel,i=this.childOfName("line"),s=o&&o.emphasisLineStyle,l=o&&o.blurLineStyle,u=o&&o.selectLineStyle,d=o&&o.labelStatesModels,f=o&&o.emphasisDisabled,v=o&&o.focus,p=o&&o.blurScope;if(!o||e.hasItemOption){var m=e.getItemModel(a),b=m.getModel("emphasis");s=b.getModel("lineStyle").getLineStyle(),l=m.getModel(["blur","lineStyle"]).getLineStyle(),u=m.getModel(["select","lineStyle"]).getLineStyle(),f=b.get("disabled"),v=b.get("focus"),p=b.get("blurScope"),d=De(m)}var I=e.getItemVisual(a,"style"),S=I.stroke;i.useStyle(I),i.style.fill=null,i.style.strokeNoScale=!0,i.ensureState("emphasis").style=s,i.ensureState("blur").style=l,i.ensureState("select").style=u,j(Fe,function(x){var T=this.childOfName(x);if(T){T.setColor(S),T.style.opacity=I.opacity;for(var A=0;A<Ct.length;A++){var C=Ct[A],V=i.getState(C);if(V){var O=V.style||{},R=T.ensureState(C),$=R.style||(R.style={});O.stroke!=null&&($[T.__isEmptyBrush?"stroke":"fill"]=O.stroke),O.opacity!=null&&($.opacity=O.opacity)}}T.markRedraw()}},this);var w=n.getRawValue(a);ea(this,d,{labelDataIndex:a,labelFetcher:{getFormattedLabel:function(x,T){return n.getFormattedLabel(x,T,e.dataType)}},inheritColor:S||"#000",defaultOpacity:I.opacity,defaultText:(w==null?e.getName(a):isFinite(w)?pr(w):w)+""});var g=this.getTextContent();if(g){var k=d.normal;g.__align=g.style.align,g.__verticalAlign=g.style.verticalAlign,g.__position=k.get("position")||"middle";var _=k.get("distance");ce(_)||(_=[_,_]),g.__labelDistance=_}this.setTextConfig({position:null,local:!0,inside:!1}),ta(this,v,p,f)},t.prototype.highlight=function(){Wt(this)},t.prototype.downplay=function(){Jt(this)},t.prototype.updateLayout=function(e,a){this.setLinePoints(e.getItemLayout(a))},t.prototype.setLinePoints=function(e){var a=this.childOfName("line");et(a.shape,e),a.dirty()},t.prototype.beforeUpdate=function(){var e=this,a=e.childOfName("fromSymbol"),o=e.childOfName("toSymbol"),n=e.getTextContent();if(!a&&!o&&(!n||n.ignore))return;for(var i=1,s=this.parent;s;)s.scaleX&&(i/=s.scaleX),s=s.parent;var l=e.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,d=l.pointAt(0),f=l.pointAt(u),v=le([],f,d);he(v,v);function p(V,O){var R=V.__specifiedRotation;if(R==null){var $=l.tangentAt(O);V.attr("rotation",(O===1?-1:1)*Math.PI/2-Math.atan2($[1],$[0]))}else V.attr("rotation",R)}if(a&&(a.setPosition(d),p(a,0),a.scaleX=a.scaleY=i*u,a.markRedraw()),o&&(o.setPosition(f),p(o,1),o.scaleX=o.scaleY=i*u,o.markRedraw()),n&&!n.ignore){n.x=n.y=0,n.originX=n.originY=0;var m=void 0,b=void 0,I=n.__labelDistance,S=I[0]*i,w=I[1]*i,g=u/2,k=l.tangentAt(g),_=[k[1],-k[0]],x=l.pointAt(g);_[1]>0&&(_[0]=-_[0],_[1]=-_[1]);var T=k[0]<0?-1:1;if(n.__position!=="start"&&n.__position!=="end"){var A=-Math.atan2(k[1],k[0]);f[0]<d[0]&&(A=Math.PI+A),n.rotation=A}var C=void 0;switch(n.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":C=-w,b="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":C=w,b="top";break;default:C=0,b="middle"}switch(n.__position){case"end":n.x=v[0]*S+f[0],n.y=v[1]*w+f[1],m=v[0]>.8?"left":v[0]<-.8?"right":"center",b=v[1]>.8?"top":v[1]<-.8?"bottom":"middle";break;case"start":n.x=-v[0]*S+d[0],n.y=-v[1]*w+d[1],m=v[0]>.8?"right":v[0]<-.8?"left":"center",b=v[1]>.8?"bottom":v[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":n.x=S*T+d[0],n.y=d[1]+C,m=k[0]<0?"right":"left",n.originX=-S*T,n.originY=-C;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":n.x=x[0],n.y=x[1]+C,m="center",n.originY=-C;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":n.x=-S*T+f[0],n.y=f[1]+C,m=k[0]>=0?"right":"left",n.originX=S*T,n.originY=-C;break}n.scaleX=n.scaleY=i,n.setStyle({verticalAlign:n.__verticalAlign||b,align:n.__align||m})}},t})(Te),ko=(function(){function r(t){this.group=new Te,this._LineCtor=t||wo}return r.prototype.updateData=function(t){var e=this;this._progressiveEls=null;var a=this,o=a.group,n=a._lineData;a._lineData=t,n||o.removeAll();var i=Ft(t);t.diff(n).add(function(s){e._doAdd(t,s,i)}).update(function(s,l){e._doUpdate(n,t,l,s,i)}).remove(function(s){o.remove(n.getItemGraphicEl(s))}).execute()},r.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(e,a){e.updateLayout(t,a)},this)},r.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=Ft(t),this._lineData=null,this.group.removeAll()},r.prototype.incrementalUpdate=function(t,e){this._progressiveEls=[];function a(s){!s.isGroup&&!Lo(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var o=t.start;o<t.end;o++){var n=e.getItemLayout(o);if(Ye(n)){var i=new this._LineCtor(e,o,this._seriesScope);i.traverse(a),this.group.add(i),e.setItemGraphicEl(o,i),this._progressiveEls.push(i)}}},r.prototype.remove=function(){this.group.removeAll()},r.prototype.eachRendered=function(t){aa(this._progressiveEls||this.group,t)},r.prototype._doAdd=function(t,e,a){var o=t.getItemLayout(e);if(Ye(o)){var n=new this._LineCtor(t,e,a);t.setItemGraphicEl(e,n),this.group.add(n)}},r.prototype._doUpdate=function(t,e,a,o,n){var i=t.getItemGraphicEl(a);if(!Ye(e.getItemLayout(o))){this.group.remove(i);return}i?i.updateData(e,o,n):i=new this._LineCtor(e,o,n),e.setItemGraphicEl(o,i),this.group.add(i)},r})();function Lo(r){return r.animators&&r.animators.length>0}function Ft(r){var t=r.hostModel,e=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:e.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:e.get("disabled"),blurScope:e.get("blurScope"),focus:e.get("focus"),labelStatesModels:De(t)}}function Yt(r){return isNaN(r[0])||isNaN(r[1])}function Ye(r){return r&&!Yt(r[0])&&!Yt(r[1])}var Xe=[],$e=[],He=[],ne=gr,je=hr,Xt=Math.abs;function $t(r,t,e){for(var a=r[0],o=r[1],n=r[2],i=1/0,s,l=e*e,u=.1,d=.1;d<=.9;d+=.1){Xe[0]=ne(a[0],o[0],n[0],d),Xe[1]=ne(a[1],o[1],n[1],d);var f=Xt(je(Xe,t)-l);f<i&&(i=f,s=d)}for(var v=0;v<32;v++){var p=s+u;$e[0]=ne(a[0],o[0],n[0],s),$e[1]=ne(a[1],o[1],n[1],s),He[0]=ne(a[0],o[0],n[0],p),He[1]=ne(a[1],o[1],n[1],p);var f=je($e,t)-l;if(Xt(f)<.01)break;var m=je(He,t)-l;u/=2,f<0?m>=0?s=s+u:s=s-u:m>=0?s=s-u:s=s+u}return s}function Ze(r,t){var e=[],a=mr,o=[[],[],[]],n=[[],[]],i=[];t/=2,r.eachEdge(function(s,l){var u=s.getLayout(),d=s.getVisual("fromSymbol"),f=s.getVisual("toSymbol");u.__original||(u.__original=[q(u[0]),q(u[1])],u[2]&&u.__original.push(q(u[2])));var v=u.__original;if(u[2]!=null){if(H(o[0],v[0]),H(o[1],v[2]),H(o[2],v[1]),d&&d!=="none"){var p=me(s.node1),m=$t(o,v[0],p*t);a(o[0][0],o[1][0],o[2][0],m,e),o[0][0]=e[3],o[1][0]=e[4],a(o[0][1],o[1][1],o[2][1],m,e),o[0][1]=e[3],o[1][1]=e[4]}if(f&&f!=="none"){var p=me(s.node2),m=$t(o,v[1],p*t);a(o[0][0],o[1][0],o[2][0],m,e),o[1][0]=e[1],o[2][0]=e[2],a(o[0][1],o[1][1],o[2][1],m,e),o[1][1]=e[1],o[2][1]=e[2]}H(u[0],o[0]),H(u[1],o[2]),H(u[2],o[1])}else{if(H(n[0],v[0]),H(n[1],v[1]),le(i,n[1],n[0]),he(i,i),d&&d!=="none"){var p=me(s.node1);We(n[0],n[0],i,p*t)}if(f&&f!=="none"){var p=me(s.node2);We(n[1],n[1],i,-p*t)}H(u[0],n[0]),H(u[1],n[1])}})}function Ht(r){return r.type==="view"}var Co=(function(r){J(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.init=function(e,a){var o=new jr,n=new ko,i=this.group;this._controller=new Ur(a.getZr()),this._controllerHost={target:i},i.add(o.group),i.add(n.group),this._symbolDraw=o,this._lineDraw=n,this._firstRender=!0},t.prototype.render=function(e,a,o){var n=this,i=e.coordinateSystem;this._model=e;var s=this._symbolDraw,l=this._lineDraw,u=this.group;if(Ht(i)){var d={x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY};this._firstRender?u.attr(d):Ce(u,d,e)}Ze(e.getGraph(),pe(e));var f=e.getData();s.updateData(f);var v=e.getEdgeData();l.updateData(v),this._updateNodeAndLinkScale(),this._updateController(e,a,o),clearTimeout(this._layoutTimeout);var p=e.forceLayout,m=e.get(["force","layoutAnimation"]);p&&this._startForceLayoutIteration(p,m);var b=e.get("layout");f.graph.eachNode(function(g){var k=g.dataIndex,_=g.getGraphicEl(),x=g.getModel();if(_){_.off("drag").off("dragend");var T=x.get("draggable");T&&_.on("drag",function(C){switch(b){case"force":p.warmUp(),!n._layouting&&n._startForceLayoutIteration(p,m),p.setFixed(k),f.setItemLayout(k,[_.x,_.y]);break;case"circular":f.setItemLayout(k,[_.x,_.y]),g.setLayout({fixed:!0},!0),ut(e,"symbolSize",g,[C.offsetX,C.offsetY]),n.updateLayout(e);break;case"none":default:f.setItemLayout(k,[_.x,_.y]),lt(e.getGraph(),e),n.updateLayout(e);break}}).on("dragend",function(){p&&p.setUnfixed(k)}),_.setDraggable(T,!!x.get("cursor"));var A=x.get(["emphasis","focus"]);A==="adjacency"&&(Ue(_).focus=g.getAdjacentDataIndices())}}),f.graph.eachEdge(function(g){var k=g.getGraphicEl(),_=g.getModel().get(["emphasis","focus"]);k&&_==="adjacency"&&(Ue(k).focus={edge:[g.dataIndex],node:[g.node1.dataIndex,g.node2.dataIndex]})});var I=e.get("layout")==="circular"&&e.get(["circular","rotateLabel"]),S=f.getLayout("cx"),w=f.getLayout("cy");f.graph.eachNode(function(g){da(g,I,S,w)}),this._firstRender=!1},t.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(e,a){var o=this;(function n(){e.step(function(i){o.updateLayout(o._model),(o._layouting=!i)&&(a?o._layoutTimeout=setTimeout(n,16):n())})})()},t.prototype._updateController=function(e,a,o){var n=this,i=this._controller,s=this._controllerHost,l=this.group;if(i.setPointerChecker(function(u,d,f){var v=l.getBoundingRect();return v.applyTransform(l.transform),v.contain(d,f)&&!Jr(u,o,e)}),!Ht(e.coordinateSystem)){i.disable();return}i.enable(e.get("roam")),s.zoomLimit=e.get("scaleLimit"),s.zoom=e.coordinateSystem.getZoom(),i.off("pan").off("zoom").on("pan",function(u){Kr(s,u.dx,u.dy),o.dispatchAction({seriesId:e.id,type:"graphRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){qr(s,u.scale,u.originX,u.originY),o.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),n._updateNodeAndLinkScale(),Ze(e.getGraph(),pe(e)),n._lineDraw.updateLayout(),o.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(){var e=this._model,a=e.getData(),o=pe(e);a.eachItemGraphicEl(function(n,i){n&&n.setSymbolScale(o)})},t.prototype.updateLayout=function(e){Ze(e.getGraph(),pe(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},t.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},t.type="graph",t})(yr);function ie(r){return"_EC_"+r}var Do=(function(){function r(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return r.prototype.isDirected=function(){return this._directed},r.prototype.addNode=function(t,e){t=t==null?""+e:""+t;var a=this._nodesMap;if(!a[ie(t)]){var o=new ae(t,e);return o.hostGraph=this,this.nodes.push(o),a[ie(t)]=o,o}},r.prototype.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},r.prototype.getNodeById=function(t){return this._nodesMap[ie(t)]},r.prototype.addEdge=function(t,e,a){var o=this._nodesMap,n=this._edgesMap;if(Le(t)&&(t=this.nodes[t]),Le(e)&&(e=this.nodes[e]),t instanceof ae||(t=o[ie(t)]),e instanceof ae||(e=o[ie(e)]),!(!t||!e)){var i=t.id+"-"+e.id,s=new va(t,e,a);return s.hostGraph=this,this._directed&&(t.outEdges.push(s),e.inEdges.push(s)),t.edges.push(s),t!==e&&e.edges.push(s),this.edges.push(s),n[i]=s,s}},r.prototype.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},r.prototype.getEdge=function(t,e){t instanceof ae&&(t=t.id),e instanceof ae&&(e=e.id);var a=this._edgesMap;return this._directed?a[t+"-"+e]:a[t+"-"+e]||a[e+"-"+t]},r.prototype.eachNode=function(t,e){for(var a=this.nodes,o=a.length,n=0;n<o;n++)a[n].dataIndex>=0&&t.call(e,a[n],n)},r.prototype.eachEdge=function(t,e){for(var a=this.edges,o=a.length,n=0;n<o;n++)a[n].dataIndex>=0&&a[n].node1.dataIndex>=0&&a[n].node2.dataIndex>=0&&t.call(e,a[n],n)},r.prototype.breadthFirstTraverse=function(t,e,a,o){if(e instanceof ae||(e=this._nodesMap[ie(e)]),!!e){for(var n=a==="out"?"outEdges":a==="in"?"inEdges":"edges",i=0;i<this.nodes.length;i++)this.nodes[i].__visited=!1;if(!t.call(o,e,null))for(var s=[e];s.length;)for(var l=s.shift(),u=l[n],i=0;i<u.length;i++){var d=u[i],f=d.node1===l?d.node2:d.node1;if(!f.__visited){if(t.call(o,f,l))return;s.push(f),f.__visited=!0}}}},r.prototype.update=function(){for(var t=this.data,e=this.edgeData,a=this.nodes,o=this.edges,n=0,i=a.length;n<i;n++)a[n].dataIndex=-1;for(var n=0,i=t.count();n<i;n++)a[t.getRawIndex(n)].dataIndex=n;e.filterSelf(function(s){var l=o[e.getRawIndex(s)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var n=0,i=o.length;n<i;n++)o[n].dataIndex=-1;for(var n=0,i=e.count();n<i;n++)o[e.getRawIndex(n)].dataIndex=n},r.prototype.clone=function(){for(var t=new r(this._directed),e=this.nodes,a=this.edges,o=0;o<e.length;o++)t.addNode(e[o].id,e[o].dataIndex);for(var o=0;o<a.length;o++){var n=a[o];t.addEdge(n.node1.id,n.node2.id,n.dataIndex)}return t},r})(),ae=(function(){function r(t,e){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=t??"",this.dataIndex=e??-1}return r.prototype.degree=function(){return this.edges.length},r.prototype.inDegree=function(){return this.inEdges.length},r.prototype.outDegree=function(){return this.outEdges.length},r.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostGraph,a=e.data.getItemModel(this.dataIndex);return a.getModel(t)}},r.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},e=0;e<this.edges.length;e++){var a=this.edges[e];a.dataIndex<0||(t.edge.push(a.dataIndex),t.node.push(a.node1.dataIndex,a.node2.dataIndex))}return t},r.prototype.getTrajectoryDataIndices=function(){for(var t=ue(),e=ue(),a=0;a<this.edges.length;a++){var o=this.edges[a];if(!(o.dataIndex<0)){t.set(o.dataIndex,!0);for(var n=[o.node1],i=[o.node2],s=0;s<n.length;){var l=n[s];s++,e.set(l.dataIndex,!0);for(var u=0;u<l.inEdges.length;u++)t.set(l.inEdges[u].dataIndex,!0),n.push(l.inEdges[u].node1)}for(s=0;s<i.length;){var d=i[s];s++,e.set(d.dataIndex,!0);for(var u=0;u<d.outEdges.length;u++)t.set(d.outEdges[u].dataIndex,!0),i.push(d.outEdges[u].node2)}}}return{edge:t.keys(),node:e.keys()}},r})(),va=(function(){function r(t,e,a){this.dataIndex=-1,this.node1=t,this.node2=e,this.dataIndex=a??-1}return r.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostGraph,a=e.edgeData.getItemModel(this.dataIndex);return a.getModel(t)}},r.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},r.prototype.getTrajectoryDataIndices=function(){var t=ue(),e=ue();t.set(this.dataIndex,!0);for(var a=[this.node1],o=[this.node2],n=0;n<a.length;){var i=a[n];n++,e.set(i.dataIndex,!0);for(var s=0;s<i.inEdges.length;s++)t.set(i.inEdges[s].dataIndex,!0),a.push(i.inEdges[s].node1)}for(n=0;n<o.length;){var l=o[n];n++,e.set(l.dataIndex,!0);for(var s=0;s<l.outEdges.length;s++)t.set(l.outEdges[s].dataIndex,!0),o.push(l.outEdges[s].node2)}return{edge:t.keys(),node:e.keys()}},r})();function pa(r,t){return{getValue:function(e){var a=this[r][t];return a.getStore().get(a.getDimensionIndex(e||"value"),this.dataIndex)},setVisual:function(e,a){this.dataIndex>=0&&this[r][t].setItemVisual(this.dataIndex,e,a)},getVisual:function(e){return this[r][t].getItemVisual(this.dataIndex,e)},setLayout:function(e,a){this.dataIndex>=0&&this[r][t].setItemLayout(this.dataIndex,e,a)},getLayout:function(){return this[r][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[r][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[r][t].getRawIndex(this.dataIndex)}}}oa(ae,pa("hostGraph","data"));oa(va,pa("hostGraph","edgeData"));function To(r,t,e,a,o){for(var n=new Do(a),i=0;i<r.length;i++)n.addNode(Dt(r[i].id,r[i].name,i),i);for(var s=[],l=[],u=0,i=0;i<t.length;i++){var d=t[i],f=d.source,v=d.target;n.addEdge(f,v,u)&&(l.push(d),s.push(Dt(br(d.id,null),f+" > "+v)),u++)}var p=e.get("coordinateSystem"),m;if(p==="cartesian2d"||p==="polar")m=Br(r,e);else{var b=Kt.get(p),I=b?b.dimensions||[]:[];_r(I,"value")<0&&I.concat(["value"]);var S=Ut(r,{coordDimensions:I,encodeDefine:e.getEncode()}).dimensions;m=new ke(S,e),m.initData(r)}var w=new ke(["value"],e);return w.initData(l,s),o&&o(m,w),eo({mainData:m,struct:n,structAttr:"graph",datas:{node:m,edge:w},datasAttr:{node:"data",edge:"edgeData"}}),n.update(),n}var Ao=(function(r){J(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.init=function(e){r.prototype.init.apply(this,arguments);var a=this;function o(){return a._categoriesData}this.legendVisualProvider=new Sr(o,o),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},t.prototype.mergeOption=function(e){r.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(e){r.prototype.mergeDefaultAndTheme.apply(this,arguments),xr(e,"edgeLabel",["show"])},t.prototype.getInitialData=function(e,a){var o=e.edges||e.links||[],n=e.data||e.nodes||[],i=this;if(n&&o){vo(this);var s=To(n,o,this,!0,l);return j(s.edges,function(u){po(u.node1,u.node2,this,u.dataIndex)},this),s.data}function l(u,d){u.wrapMethod("getItemModel",function(m){var b=i._categoriesModels,I=m.getShallow("category"),S=b[I];return S&&(S.parentModel=m.parentModel,m.parentModel=S),m});var f=Ir.prototype.getModel;function v(m,b){var I=f.call(this,m,b);return I.resolveParentPath=p,I}d.wrapMethod("getItemModel",function(m){return m.resolveParentPath=p,m.getModel=v,m});function p(m){if(m&&(m[0]==="label"||m[1]==="label")){var b=m.slice();return m[0]==="label"?b[0]="edgeLabel":m[1]==="label"&&(b[1]="edgeLabel"),b}return m}}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(e,a,o){if(o==="edge"){var n=this.getData(),i=this.getDataParams(e,o),s=n.graph.getEdgeByIndex(e),l=n.getName(s.node1.dataIndex),u=n.getName(s.node2.dataIndex),d=[];return l!=null&&d.push(l),u!=null&&d.push(u),wr("nameValue",{name:d.join(" > "),value:i.value,noValue:i.value==null})}var f=kr({series:this,dataIndex:e,multipleSeries:a});return f},t.prototype._updateCategoriesData=function(){var e=at(this.option.categories||[],function(o){return o.value!=null?o:W({value:0},o)}),a=new ke(["value"],this);a.initData(e),this._categoriesData=a,this._categoriesModels=a.mapArray(function(o){return a.getItemModel(o)})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.isAnimationEnabled=function(){return r.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t})(Lr),Eo={type:"graphRoam",event:"graphRoam",update:"none"};function Mo(r){r.registerChartView(Co),r.registerSeriesModel(Ao),r.registerProcessor(so),r.registerVisual(lo),r.registerVisual(uo),r.registerLayout(mo),r.registerLayout(r.PRIORITY.VISUAL.POST_CHART_LAYOUT,ho),r.registerLayout(bo),r.registerCoordinateSystem("graphView",{dimensions:ia.dimensions,create:So}),r.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},Ke),r.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},Ke),r.registerAction(Eo,function(t,e,a){e.eachComponent({mainType:"series",query:t},function(o){var n=o.coordinateSystem,i=Qr(n,t,void 0,a);o.setCenter&&o.setCenter(i.center),o.setZoom&&o.setZoom(i.zoom)})})}const zo={class:"space-y-6 overflow-x-hidden"},No={class:"flex flex-col gap-3 lg:flex-row lg:items-center"},Ro={class:"flex flex-1 flex-col gap-3 sm:flex-row"},Po={class:"flex items-center gap-2"},Vo={class:"grid grid-cols-1 gap-4 lg:grid-cols-[3fr_1.15fr]"},Oo={class:"relative overflow-hidden rounded-2xl"},Go={key:0,class:"pointer-events-none absolute inset-0 flex flex-col items-center justify-center rounded-2xl border border-dashed border-border/60 bg-background/70 text-xs text-muted-foreground"},Bo={class:"rounded-2xl border border-border/70 bg-card/80 p-5 text-sm shadow-sm"},Fo={class:"mt-3 grid grid-cols-2 gap-3 text-base font-semibold"},Yo={class:"rounded-lg border border-border/60 bg-background/60 p-3 text-center"},Xo={class:"mt-1 text-2xl font-bold"},$o={class:"rounded-lg border border-border/60 bg-background/60 p-3 text-center"},Ho={class:"mt-1 text-2xl font-bold"},jo={class:"mt-3 space-y-2"},Zo={class:"flex items-center gap-2"},Uo={class:"text-xs font-semibold"},Ko={class:"text-xs text-muted-foreground"},qo={key:0,class:"mt-3 space-y-2"},Wo={class:"text-base font-semibold"},Jo={class:"text-xs text-muted-foreground"},Qo={class:"mt-3 rounded-lg border border-border/50 bg-background/50 p-3"},en={class:"mt-2 space-y-1 text-xs text-muted-foreground"},tn={key:0},an={class:"truncate"},rn={key:1,class:"mt-3 text-xs text-muted-foreground"},on={class:"hidden lg:grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3"},nn={class:"rounded-2xl border border-border/70 bg-card/80 p-4"},sn={class:"mt-3 flex flex-wrap gap-2"},ln={class:"rounded-2xl border border-border/70 bg-card/80 p-4"},un={class:"mt-3 space-y-3 text-xs text-muted-foreground"},cn={class:"flex items-center justify-between"},dn={class:"font-semibold text-foreground"},fn={class:"flex gap-2"},vn={class:"rounded-2xl border border-border/70 bg-card/80 p-4"},pn={class:"mt-3 flex flex-wrap gap-2"},mn={key:0,class:"border border-dashed border-border/60 p-4 text-sm"},gn={class:"mt-2 space-y-1"},hn={class:"font-medium"},yn={class:"text-xs text-muted-foreground"},bn={key:0,class:"fixed inset-0 z-40 flex flex-col bg-background/70 backdrop-blur-sm sm:hidden"},_n={class:"rounded-t-3xl border border-border/70 bg-card p-6 shadow-2xl"},Sn={class:"flex items-center justify-between"},xn={class:"mt-4 space-y-5 text-sm"},In={class:"mt-3 flex flex-wrap gap-2"},wn={class:"mt-3 space-y-3"},kn={class:"flex items-center justify-between"},Ln={class:"font-semibold text-foreground"},Cn={class:"mt-3 flex gap-2"},Dn={class:"mt-3 flex flex-wrap gap-2"},Pn=jt({__name:"graph",setup(r){Cr([Mo,Dr,Tr]);const t=Da({loader:()=>Aa(()=>import("./BKsOtMie.js"),__vite__mapDeps([0,1,2]),import.meta.url),suspensible:!1,ssr:!1,loadingComponent:{render(){return Ea("div",{class:"h-[420px] border border-dashed border-border/60 bg-background flex items-center justify-center text-xs text-muted-foreground"},"...")}}}),{$api:e}=Sa(),a=U(null),o=U({nodes:[],links:[]}),n=U(null),i=xa({nodes:0,links:0}),s=U(""),l=U([]),u={high:"",medium:"",low:""},d=U("force"),f=U("all"),v=U(70),p=U(1),m=U(!1),b=U(!1),I=[{label:"",value:"all"},{label:"",value:"high"},{label:"",value:"medium"},{label:"",value:"low"}],S=[{label:"",value:"force"},{label:"",value:"circular"}],w={high:{fill:"#09090b",text:"#f4f4f5",halo:"rgba(9,9,11,0.45)",stroke:"#18181b"},medium:{fill:"#f4f4f5",text:"#09090b",halo:"rgba(24,24,27,0.08)",stroke:"#d4d4d8"},low:{fill:"#e4e4e7",text:"#18181b",halo:"rgba(24,24,27,0.06)",stroke:"#d4d4d8"}},g=(h,c)=>{const D=M=>{const X=(M??"").toString().trim();if(!X)return null;const K=X.toLowerCase();if(["high","high-risk","risk-high","critical","severe"].includes(K)||//.test(X))return"high";if(["low","low-risk","risk-low","minor"].includes(K)||//.test(X))return"low";if(["medium","mid","moderate","middle"].includes(K)||//.test(X))return"medium";const Q=Number(X);return Number.isNaN(Q)?null:Q>=.66||Q>=3?"high":Q<=.33||Q<=1?"low":"medium"};for(const M of h){const X=D(M);if(X)return X}const P=[c?.riskScore,c?.score,c?.risk_value,c?.level,c?.severityScore,c?.importance];for(const M of P){const X=D(M);if(X)return X}return"medium"},k=h=>{const c=(h||"").trim();if(c.length<=4)return c||"Node";const D=c.length>8?5:4,P=new RegExp(`.{1,${D}}`,"g");return c.match(P)?.join(`
`)??c},_=(h,c)=>{const D=46+Math.min(32,Math.max(0,(h||"").length-4)*3);return c==="high"?D+6:c==="low"?D-4:D},x=h=>Math.min(1.8,Math.max(.65,h)),T=(h=12)=>Math.round(h*x(p.value||1)),A=h=>Math.round(h*1.2),C=()=>{b.value=!1},V=async()=>{await Ne(),(a.value?a.value.chart:null)?.resize({animation:!1})},O=h=>{const c=h.properties||{},D=g([c.riskLevel,c.risk_level,c.risk,h.riskLevel,h.risk_level,c.riskCategory,c.risk_category,c.severity,c.level,c.riskScore,c.score],c),P=h.name||h.id,M=w[D]||w.medium,X=_(P,D),K=12;return{name:h.id,category:h.category||c.category||"",riskLevel:D,value:h.value||1,draggable:!0,symbol:"circle",symbolSize:X,labelBaseSize:K,itemStyle:{color:M.fill,borderColor:M.stroke,borderWidth:2,shadowBlur:20,shadowColor:M.halo},label:{show:!0,color:M.text,fontWeight:600,fontSize:K,formatter:k(P),lineHeight:A(K),padding:[0,6]},properties:c}},R=h=>({source:h.source,target:h.target,value:h.value||1,label:h.label||{show:!0,formatter:h.type||"",backgroundColor:"rgba(15,23,42,0.85)",color:"#f8fafc",padding:[2,8],borderRadius:14,fontSize:11,fontWeight:500},lineStyle:h.lineStyle||{width:1.1,curveness:.24,color:"rgba(15,23,42,0.25)",shadowBlur:2,shadowColor:"rgba(15,23,42,0.2)"},properties:h.properties||{},type:h.type||""}),$=ve(()=>{if(f.value==="all")return{nodes:o.value.nodes.slice(),links:o.value.links.slice()};const h=o.value.nodes.filter(P=>P.riskLevel===f.value),c=new Set(h.map(P=>P.name)),D=o.value.links.filter(P=>c.has(P.source)&&c.has(P.target));return{nodes:h,links:D}}),de=ve(()=>({nodes:$.value.nodes.map(h=>{const c=h.labelBaseSize||12,D=T(c);return{...h,label:{...h.label||{},fontSize:D,lineHeight:A(D)}}}),links:$.value.links})),ye=ve(()=>{const h={high:0,medium:0,low:0};o.value.nodes.forEach(D=>{const P=D.riskLevel||"medium";h[P]=(h[P]||0)+1});const c=o.value.nodes.length||1;return["high","medium","low"].map(D=>({key:D,label:u[D],count:h[D],percent:Math.round(h[D]/Math.max(c,1)*100),color:w[D].fill}))}),ct=ve(()=>{if(!n.value)return[];const h=new Set;return o.value.links.forEach(c=>{c.source===n.value.name&&h.add(c.target),c.target===n.value.name&&h.add(c.source)}),o.value.nodes.filter(c=>h.has(c.name)).slice(0,5)}),ma=ve(()=>{const h=de.value,c=360+v.value*6,D=d.value==="circular";return{backgroundColor:"transparent",tooltip:{formatter:P=>P.data&&P.data.label||P.name},series:[{type:"graph",layout:D?"circular":"force",roam:!0,focusNodeAdjacency:!0,draggable:!0,scaleLimit:{min:.6,max:2.2},circular:D?{rotateLabel:!0}:void 0,force:D?void 0:{repulsion:c,edgeLength:[110,190],gravity:.035,friction:.12},edgeSymbol:["circle","arrow"],edgeSymbolSize:[6,12],lineStyle:{color:"rgba(24,24,27,0.4)",width:1.2,opacity:.85,curveness:.24},label:{show:!1},itemStyle:{borderWidth:0},data:h.nodes,links:h.links,animationDuration:1400,animationEasingUpdate:"cubicInOut",emphasis:{focus:"adjacency",scale:!0,lineStyle:{width:2,color:"#09090b",opacity:.95}}}]}}),dt=()=>{const h=a.value?a.value.chart:null;h&&(h.off("click"),h.off("dblclick"),h.off("graphRoam"),h.on("click",c=>{c.dataType==="node"&&(n.value=c.data)}),h.on("dblclick",async c=>{c.dataType==="node"&&c.data?.name&&await Me(c.data.name)}),h.on("graphRoam",c=>{typeof c.zoom=="number"&&!Number.isNaN(c.zoom)&&(p.value=x(c.zoom))}))},Ee=async()=>{try{m.value=!0;const c=(await e.get("/graph/initial/",{params:{limit:80}})).data.graph||{nodes:[],links:[]};o.value={nodes:c.nodes.map(O),links:c.links.map(R)},i.nodes=c.counts&&c.counts.nodes||c.nodes.length,i.links=c.counts&&c.counts.links||c.links.length,n.value=null,p.value=1,await Ne(),dt(),await V()}finally{m.value=!1}},ft=async()=>{const h=s.value.trim();if(!h){l.value=[];return}try{const c=await e.get("/graph/search/universal/",{params:{query:h}});l.value=c.data.nodes?c.data.nodes.slice(0,5):[]}catch(c){console.error("Failed to search graph",c),l.value=[]}},Me=async h=>{if(h)try{const c=await e.get(`/graph/node/${h}/expand/`,{params:{limit:30}}),D=c.data.graph||c.data;o.value={nodes:D.nodes.map(O),links:D.links.map(R)},n.value=o.value.nodes.find(P=>P.name===h)||null,l.value=[],await Ne(),dt(),await V()}catch(c){console.error("Failed to focus node",c)}},vt=h=>{f.value=h},pt=h=>{f.value=h},mt=()=>{v.value=Math.min(100,v.value+10)},gt=()=>{const h=a.value?a.value.chart:null;if(!h)return;const c=h.getDataURL({type:"png",pixelRatio:2,backgroundColor:"#ffffff"}),D=document.createElement("a");D.href=c,D.download=`graph-${Date.now()}.png`,D.click()},ht=()=>{f.value="all",v.value=70,d.value="force",p.value=1,Ee()};return Ia(f,h=>{h!=="all"&&n.value&&n.value.riskLevel!==h&&(n.value=null)}),wa(Ee),(h,c)=>{const D=Ma,P=za,M=Ra,X=Oa,K=Ga,Q=Va,ga=Ar,yt=Mr,ha=Ba,ya=Pa;return B(),F("div",zo,[E(D,{title:"",description:""}),y("div",No,[y("div",Ro,[E(P,{modelValue:z(s),"onUpdate:modelValue":c[0]||(c[0]=L=>ze(s)?s.value=L:null),placeholder:"",class:"flex-1",onKeyup:ka(ft,["enter"])},null,8,["modelValue"]),E(M,{variant:"outline",class:"sm:w-auto",onClick:ft},{default:N(()=>[...c[6]||(c[6]=[G("",-1)])]),_:1})]),y("div",Po,[E(M,{variant:"outline",class:"sm:hidden",onClick:c[1]||(c[1]=L=>b.value=!0)},{default:N(()=>[...c[7]||(c[7]=[G("",-1)])]),_:1}),E(M,{variant:"outline",class:"flex items-center gap-2",disabled:z(m),onClick:Ee},{default:N(()=>[y("span",{class:Ca(["inline-flex h-4 w-4 items-center justify-center",{"animate-spin":z(m)}]),"aria-hidden":"true"},"  ",2),c[8]||(c[8]=G("  ",-1))]),_:1},8,["disabled"])])]),E(ya,{class:"border border-border/80"},{default:N(()=>[E(Q,null,{default:N(()=>[E(X,null,{default:N(()=>[...c[9]||(c[9]=[G("",-1)])]),_:1}),E(K,null,{default:N(()=>[...c[10]||(c[10]=[G("",-1)])]),_:1})]),_:1}),E(ha,{class:"space-y-6"},{default:N(()=>[y("div",Vo,[y("div",Oo,[E(ga,null,{default:N(()=>[E(z(t),{ref_key:"chartRef",ref:a,class:"h-[340px] w-full rounded-2xl border border-border/80 bg-background/60 shadow-inner sm:h-[420px]",option:z(ma),autoresize:""},null,8,["option"])]),_:1}),z(de).nodes.length?be("",!0):(B(),F("div",Go,[...c[11]||(c[11]=[y("p",null,"",-1),y("p",null,"",-1)])]))]),y("div",Bo,[y("div",null,[c[14]||(c[14]=y("p",{class:"text-xs uppercase tracking-widest text-muted-foreground"},"",-1)),y("div",Fo,[y("div",Yo,[c[12]||(c[12]=y("p",{class:"text-[11px] uppercase tracking-[0.2em] text-muted-foreground"},"",-1)),y("p",Xo,Y(z(i).nodes),1)]),y("div",$o,[c[13]||(c[13]=y("p",{class:"text-[11px] uppercase tracking-[0.2em] text-muted-foreground"},"",-1)),y("p",Ho,Y(z(i).links),1)])])]),E(yt,{class:"my-4 opacity-70"}),y("div",null,[c[15]||(c[15]=y("p",{class:"text-xs uppercase tracking-widest text-muted-foreground"},"",-1)),y("div",jo,[(B(!0),F(ee,null,te(z(ye),L=>(B(),F("div",{key:L.key,class:"flex items-center justify-between rounded-lg border border-border/50 bg-background/40 px-3 py-2"},[y("div",Zo,[y("span",{class:"h-2.5 w-2.5 rounded-full",style:Ta({backgroundColor:L.color})},null,4),y("span",Uo,Y(L.label),1)]),y("div",Ko,Y(L.count)+"  "+Y(L.percent)+"%",1)]))),128))])]),E(yt,{class:"my-4 opacity-70"}),y("div",null,[c[18]||(c[18]=y("p",{class:"text-xs uppercase tracking-widest text-muted-foreground"},"",-1)),z(n)?(B(),F("div",qo,[y("p",Wo,Y(z(n).label),1),y("div",Jo,[y("p",null,""+Y(z(n).category||""),1),y("p",null,""+Y(u[z(n).riskLevel]||""),1)]),y("div",Qo,[c[17]||(c[17]=y("p",{class:"text-[11px] uppercase tracking-[0.3em] text-muted-foreground"},"",-1)),y("ul",en,[z(ct).length?be("",!0):(B(),F("li",tn,"")),(B(!0),F(ee,null,te(z(ct),L=>(B(),F("li",{key:L.name,class:"flex items-center justify-between"},[y("span",an,Y(L.label),1),E(M,{size:"xs",variant:"ghost",class:"text-[11px]",onClick:fe=>Me(L.name)},{default:N(()=>[...c[16]||(c[16]=[G("",-1)])]),_:1},8,["onClick"])]))),128))])])])):(B(),F("p",rn,""))])])]),y("div",on,[y("div",nn,[c[19]||(c[19]=y("p",{class:"text-xs uppercase tracking-widest text-muted-foreground"},"",-1)),y("div",sn,[(B(),F(ee,null,te(I,L=>E(M,{key:L.value,size:"sm",variant:z(f)===L.value?"default":"outline",class:"rounded-full",onClick:fe=>vt(L.value)},{default:N(()=>[G(Y(L.label),1)]),_:2},1032,["variant","onClick"])),64))])]),y("div",ln,[c[21]||(c[21]=y("p",{class:"text-xs uppercase tracking-widest text-muted-foreground"},"",-1)),y("div",un,[y("div",cn,[c[20]||(c[20]=y("span",null,"",-1)),y("span",dn,Y(z(v)),1)]),bt(y("input",{"onUpdate:modelValue":c[2]||(c[2]=L=>ze(v)?v.value=L:null),type:"range",min:"40",max:"100",step:"5",class:"h-1.5 w-full cursor-pointer appearance-none rounded-full bg-border accent-black"},null,512),[[_t,z(v),void 0,{number:!0}]]),y("div",fn,[(B(),F(ee,null,te(S,L=>E(M,{key:L.value,size:"sm",variant:z(d)===L.value?"default":"outline",class:"flex-1",onClick:fe=>d.value=L.value},{default:N(()=>[G(Y(L.label),1)]),_:2},1032,["variant","onClick"])),64))])])]),y("div",vn,[c[26]||(c[26]=y("p",{class:"text-xs uppercase tracking-widest text-muted-foreground"},"",-1)),y("div",pn,[E(M,{size:"sm",variant:"outline",onClick:c[3]||(c[3]=L=>pt("high"))},{default:N(()=>[...c[22]||(c[22]=[G("",-1)])]),_:1}),E(M,{size:"sm",variant:"outline",onClick:mt},{default:N(()=>[...c[23]||(c[23]=[G("",-1)])]),_:1}),E(M,{size:"sm",variant:"outline",onClick:gt},{default:N(()=>[...c[24]||(c[24]=[G("",-1)])]),_:1}),E(M,{size:"sm",onClick:ht},{default:N(()=>[...c[25]||(c[25]=[G("",-1)])]),_:1})])])]),z(l).length?(B(),F("div",mn,[c[28]||(c[28]=y("p",{class:"text-xs uppercase tracking-widest text-muted-foreground"},"",-1)),y("ul",gn,[(B(!0),F(ee,null,te(z(l),L=>(B(),F("li",{key:L.id,class:"flex items-center justify-between border-b border-border/40 py-2"},[y("div",null,[y("p",hn,Y(L.label),1),y("p",yn,""+Y(L.type),1)]),E(M,{size:"sm",variant:"ghost",onClick:fe=>Me(L.id)},{default:N(()=>[...c[27]||(c[27]=[G("",-1)])]),_:1},8,["onClick"])]))),128))])])):be("",!0)]),_:1})]),_:1}),E(La,{name:"fade"},{default:N(()=>[z(b)?(B(),F("div",bn,[y("div",{class:"flex-1 bg-black/40",onClick:C}),y("div",_n,[y("div",Sn,[c[30]||(c[30]=y("p",{class:"text-sm font-semibold text-muted-foreground"},"",-1)),E(M,{variant:"ghost",size:"sm",onClick:C},{default:N(()=>[...c[29]||(c[29]=[G("",-1)])]),_:1})]),y("div",xn,[y("div",null,[c[31]||(c[31]=y("p",{class:"text-xs uppercase tracking-widest text-muted-foreground"},"",-1)),y("div",In,[(B(),F(ee,null,te(I,L=>E(M,{key:L.value,size:"sm",variant:z(f)===L.value?"default":"outline",class:"rounded-full",onClick:fe=>vt(L.value)},{default:N(()=>[G(Y(L.label),1)]),_:2},1032,["variant","onClick"])),64))])]),y("div",null,[c[33]||(c[33]=y("p",{class:"text-xs uppercase tracking-widest text-muted-foreground"},"",-1)),y("div",wn,[y("div",kn,[c[32]||(c[32]=y("span",{class:"text-xs text-muted-foreground"},"",-1)),y("span",Ln,Y(z(v)),1)]),bt(y("input",{"onUpdate:modelValue":c[4]||(c[4]=L=>ze(v)?v.value=L:null),type:"range",min:"40",max:"100",step:"5",class:"h-1.5 w-full cursor-pointer appearance-none rounded-full bg-border accent-black"},null,512),[[_t,z(v),void 0,{number:!0}]])])]),y("div",null,[c[34]||(c[34]=y("p",{class:"text-xs uppercase tracking-widest text-muted-foreground"},"",-1)),y("div",Cn,[(B(),F(ee,null,te(S,L=>E(M,{key:L.value,size:"sm",variant:z(d)===L.value?"default":"outline",class:"flex-1",onClick:fe=>d.value=L.value},{default:N(()=>[G(Y(L.label),1)]),_:2},1032,["variant","onClick"])),64))])]),y("div",null,[c[39]||(c[39]=y("p",{class:"text-xs uppercase tracking-widest text-muted-foreground"},"",-1)),y("div",Dn,[E(M,{size:"sm",variant:"outline",class:"flex-1",onClick:c[5]||(c[5]=L=>pt("high"))},{default:N(()=>[...c[35]||(c[35]=[G("",-1)])]),_:1}),E(M,{size:"sm",variant:"outline",class:"flex-1",onClick:mt},{default:N(()=>[...c[36]||(c[36]=[G("",-1)])]),_:1}),E(M,{size:"sm",variant:"outline",class:"flex-1",onClick:gt},{default:N(()=>[...c[37]||(c[37]=[G("",-1)])]),_:1}),E(M,{size:"sm",class:"flex-1",onClick:ht},{default:N(()=>[...c[38]||(c[38]=[G("",-1)])]),_:1})])])]),E(M,{class:"mt-5 w-full",onClick:C},{default:N(()=>[...c[40]||(c[40]=[G("",-1)])]),_:1})])])):be("",!0)]),_:1})])}}});export{Pn as default};
